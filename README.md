# CLI Finance Manager

Консольное backend приложение для управления личными финансами написанное на Java

## Возможности

- Регистрироваться и входить по логину/паролю (поддерживает несколько пользователей)
- Добавлять доходы и расходы
- Управлять категориями и бюджетами по категориям
- Смотреть статистику (общую, по категориям, по периоду)
- Получать предупреждения (превышение бюджета, перерасход, ~80% бюджета)
- Сохранять и загружать кошелёк пользователя из файла
- Выгружать отчёт в файл
- Экспортировать/импортировать **snapshot** состояния кошелька в JSON

---

## Требования

- Java 17+
- Maven 3.8+

---

## Команды CLI
### Авторизация:
- `help` — показать подсказку со списком команд
- `register <login> <password>` — регистрация новых пользователей
- `login <login> <password>` — вход по логину и паролю пользователя
- `logout` — выход из аккаунта пользователя 
- `exit` — выйти из приложения (также сохраняет файлики с данными об операциях пользователей + их кошельки в папку data)

### Категории:
- `category add <name>` — добавить категорию доходов или расходов 
- `category list` — показывает списоку категорий пользователя
 
### Бюджеты:
- `budget set <category> <limit>` — установить/изменить бюджет по указанной категории
- `budget show` — показывает бюджеты по категориям с учетом оставшегося бюджета
 
### Операции:
- `income add <category> <amount> [YYYY-MM-DD] [comment]` — добавить категорию с доходами
- `expense add <category> <amount> [YYYY-MM-DD] [comment]` — добавить категорию с расходами

### Статистика и отчеты:
- `stats show [--from YYYY-MM-DD] [--to YYYY-MM-DD]` — показать полную статистику в консоли с расходами/доходами/балансом/бюджетом (в том числе по категориям, время указывать необязательно)
- `report file <path> [--from YYYY-MM-DD] [--to YYYY-MM-DD]` — сохраняет отчет в файл (например .txt формат, время указывать необязательно)
 
### Export/Import снэпшотов

- `snapshot import <path>` — импорт JSON снимка кошелька и применяет к текущему пользователяю
- `snapshot export <path>` — экспорт JSON снимка кошелька в указанную директорию

---

## Архитектура проекта
- cli/
    - CommandLoop — цикл чтения команд, обработка ввода/ошибок, вызовы сервисов

- core/
    - models/ — доменные модели (User, Wallet, Transaction, TransactionType)

- repository/ — интерфейсы хранилищ (UserRepository, WalletRepository)

- infra/
    - InMemoryUserRepository — in-memory хранилище пользователей
    - InMemoryWalletRepository — in-memory хранилище кошельков

- services/
    - AuthorizationService — регистрация/логин/логаут
    - WalletService — операции, категории, бюджеты, оповещения
    - StatsService — подсчёты и выборки
    - ReportService — генерация текстового отчёта и сохранение отчётов
    - WalletFileStorage — сохранение/загрузка кошелька, snapshot export/import

- Main — точка входа, сборка зависимостей и запуск CLI

---

## Пример сессии (команд)
```bash
register ivan 1234
category add Еда
category add Развлечения
category add Такси

budget set Еда 4000
budget set Развлечения 3000

income add Зарплата 20000 2025-12-01
income add Зарплата 40000 2025-12-15

expense add Еда 300 2025-12-01
expense add Еда 500 2025-12-02
expense add Развлечения 3000 2025-12-03
expense add Такси 1500 2025-12-05

stats show
report file reports\ivan_report.txt
exit 
```

---

## Запуск тестов
```bash
mvn test
```